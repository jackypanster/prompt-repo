{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <!-- 欢迎区域 -->
    <div class="text-center mb-12">
        <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
            <span class="block">发现优质</span>
            <span class="block text-primary-600">AI提示词</span>
        </h1>
        <p class="mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">
            {{ description }}。集成分类管理、标签筛选、一键复制等功能，让AI交互更高效。
        </p>
    </div>

    <!-- 功能特性 -->
    <div class="mt-16">
        <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
            <!-- 分类管理 -->
            <div class="relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-500 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <div>
                    <span class="rounded-lg inline-flex p-3 bg-primary-50 text-primary-600 ring-4 ring-white">
                        📂
                    </span>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900">
                        分类管理
                    </h3>
                    <p class="mt-2 text-sm text-gray-500">
                        按照使用场景分类整理提示词，如文生图、编程辅助、文案写作等，便于快速查找。
                    </p>
                </div>
            </div>

            <!-- 标签系统 -->
            <div class="relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-500 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <div>
                    <span class="rounded-lg inline-flex p-3 bg-green-50 text-green-600 ring-4 ring-white">
                        🏷️
                    </span>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900">
                        标签系统
                    </h3>
                    <p class="mt-2 text-sm text-gray-500">
                        灵活的标签管理，支持多标签关联，通过标签快速筛选相关的提示词内容。
                    </p>
                </div>
            </div>

            <!-- 一键复制 -->
            <div class="relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-500 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <div>
                    <span class="rounded-lg inline-flex p-3 bg-amber-50 text-amber-600 ring-4 ring-white">
                        📋
                    </span>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900">
                        一键复制
                    </h3>
                    <p class="mt-2 text-sm text-gray-500">
                        点击即可复制提示词到剪贴板，支持复制统计和防滥用限频，提升使用体验。
                    </p>
                </div>
            </div>

            <!-- 点赞互动 -->
            <div class="relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-500 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <div>
                    <span class="rounded-lg inline-flex p-3 bg-red-50 text-red-600 ring-4 ring-white">
                        👍
                    </span>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900">
                        点赞互动
                    </h3>
                    <p class="mt-2 text-sm text-gray-500">
                        为优质提示词点赞，帮助其他用户发现热门内容，防重复点赞确保数据真实性。
                    </p>
                </div>
            </div>

            <!-- 搜索筛选 -->
            <div class="relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-500 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <div>
                    <span class="rounded-lg inline-flex p-3 bg-purple-50 text-purple-600 ring-4 ring-white">
                        🔍
                    </span>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900">
                        智能搜索
                    </h3>
                    <p class="mt-2 text-sm text-gray-500">
                        支持按标题、内容、分类、标签进行搜索，快速找到所需的提示词内容。
                    </p>
                </div>
            </div>

            <!-- 管理功能 -->
            <div class="relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-500 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <div>
                    <span class="rounded-lg inline-flex p-3 bg-indigo-50 text-indigo-600 ring-4 ring-white">
                        ⚙️
                    </span>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-medium text-gray-900">
                        便捷管理
                    </h3>
                    <p class="mt-2 text-sm text-gray-500">
                        简洁的管理界面，支持提示词的创建、编辑、删除，分类和标签的维护管理。
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- 状态信息 -->
    <div class="mt-16 bg-white overflow-hidden shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">
                平台状态
            </h3>
            <div x-data="statusChecker()" x-init="checkStatus()">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-sm font-medium text-gray-500">应用状态</div>
                        <div class="mt-1 text-sm text-gray-900" x-text="appStatus">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                正常运行
                            </span>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-sm font-medium text-gray-500">数据库</div>
                        <div class="mt-1 text-sm text-gray-900" x-text="dbStatus">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                WAL模式
                            </span>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-sm font-medium text-gray-500">认证系统</div>
                        <div class="mt-1 text-sm text-gray-900">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                Basic Auth
                            </span>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-sm font-medium text-gray-500">版本</div>
                        <div class="mt-1 text-sm text-gray-900">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                v0.3.0
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 快速链接 -->
    <div class="mt-12 text-center">
        <div class="space-x-4">
            <a href="/admin" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors">
                进入管理
            </a>
            <a href="/docs" class="inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors">
                API文档
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function statusChecker() {
        return {
            appStatus: '检查中...',
            dbStatus: '检查中...',
            
            async checkStatus() {
                try {
                    // 检查应用状态
                    const healthResponse = await fetch('/health');
                    if (healthResponse.ok) {
                        this.appStatus = '✅ 正常运行';
                    } else {
                        this.appStatus = '❌ 异常';
                    }
                    
                    // 检查数据库状态
                    const dbResponse = await fetch('/db-health');
                    if (dbResponse.ok) {
                        const dbData = await dbResponse.json();
                        this.dbStatus = `✅ ${dbData.wal_mode ? 'WAL模式' : 'Normal模式'}`;
                    } else {
                        this.dbStatus = '❌ 连接失败';
                    }
                } catch (error) {
                    this.appStatus = '❌ 连接失败';
                    this.dbStatus = '❌ 连接失败';
                }
            }
        }
    }
</script>
{% endblock %} 