# Changelog

项目发布历史和重要更新记录。

## [v0.2.0] - 2025-01-26 - 数据库基础设施

### ✅ 新增功能
- **完整的数据库架构**
  - SQLite + WAL模式，优化并发读写
  - 5个核心表：categories, tags, prompts, prompt_tags, prompt_likes
  - 16个优化索引，提升查询性能
  - 外键约束和级联删除机制

- **数据模型与CRUD**
  - SQLAlchemy 2.0 数据模型定义
  - 基础CRUD操作函数
  - 防重复点赞机制（IP哈希）

- **健康检查与监控**
  - `/db-health` 端点实时监控数据库状态
  - WAL模式和外键约束状态检查
  - 表统计信息

### 🔧 技术改进
- 添加SQLAlchemy 2.0和Pydantic依赖
- 添加pytest测试框架
- 11个数据库功能测试覆盖
- 完善的.gitignore配置

### 📝 文档更新
- 更新README.md反映当前架构
- 项目结构文档化
- API端点状态说明

## [v0.1.0] - 2025-01-26 - 项目初始化

### ✅ 基础设施
- **项目框架**
  - FastAPI应用基础框架
  - uv环境管理和依赖配置
  - pyproject.toml项目配置

- **基础端点**
  - `/` 主页欢迎信息
  - `/health` 应用健康检查
  - `/docs` FastAPI自动生成的API文档

### 🏗️ 开发环境
- Python 3.12+ 运行环境
- uv包管理工具集成
- 虚拟环境正确配置
- 应用在端口8080正常运行

---

## 版本规范

- **主版本号 (Major)**: 重大架构变更或不兼容更新
- **次版本号 (Minor)**: 新功能添加或重要模块完成
- **修订号 (Patch)**: Bug修复或小幅改进

## [v0.3.0] - 2025-01-26 - 认证与权限控制

### ✅ 新增功能
- **HTTP Basic Auth认证**
  - 管理员凭证验证（用户名/密码）
  - 防时序攻击的安全比较
  - 环境变量配置支持

- **IP限频防滥用**
  - 可配置的访问频率限制
  - IP地址哈希保护隐私
  - 自动清理过期限频记录
  - 限频状态查询功能

- **认证端点**
  - `/admin` 管理员仪表板（需认证）
  - `/api/test-rate-limit` 限频测试端点
  - 认证失败返回401状态码

### 🔧 技术改进
- 添加httpx测试依赖
- 修复datetime.utcnow()弃用警告
- 8个认证功能测试覆盖
- 全局限频存储管理

### 📝 文档更新
- 更新README.md认证状态
- 更新CHANGELOG.md版本历史

## 下一版本预览

### v0.4.0 - 管理功能模块 (开发中)
- 分类管理API端点
- 标签管理API端点
- 提示词管理API端点 